boot:
    category: docker-compose
    timeout: 60s
setups: []
ilogtail:
    config:
        - name: mock-metric-case
          content:
            - '{"inputs":[{"type":"metric_mock","detail":{"IntervalMs": 1000,"Tags":{"tag1":"aaaa","tag2":"bbb"},"Fields":{"content":"xxxxx","time":"2017.09.12 20:55:36"}}}]}'
    load_config_wait: 5s
    close_wait: 5s
    env: {}
    depends_on: {}
subscriber:
    name: grpc
    config:
        address: :9000
        network: tcp
trigger:
    url: http://ilogtail:18689/test
    method: GET
    interval: 1s
    times: 10
verify:
    log_rules:
        - name: fields-check
          validator: log_fields
          spec:
            expect_log_fields:
                - tag1
                - tag2
                - content
                - time
    system_rules:
        - name: counter-check
          validator: sys_counter
          spec:
            expect_equal_flush_log: true
            expect_equal_processed_log: true
            expect_equal_raw_log: true
            expect_minimum_log_num: 15
retry:
    times: 1
    interval: 10s
testing_interval: 16s
coverage_packages:
    - ilogtail/pluginmanager
    - ilogtail/main
